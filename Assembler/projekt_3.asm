	AD1	EQU	40H
	AD2	EQU	41H
	AD3	EQU	42H
	AD4	EQU	43H	

	TEKST1	EQU	4050H
	TEKST2	EQU	4100H
	TEKST3	EQU	4150H

	LJMP	START
	ORG	100H
START:
	ACALL 	KLIKNIJ4
	ACALL	SPACE
	ACALL	READ_HEX
	MOV	AD1, A
	LCALL	WRITE_HEX
	ACALL	H
	ACALL	SPACE
	ACALL 	READ_HEX
	MOV	AD2, A
	LCALL	WRITE_HEX
	ACALL	H
	ACALL	SPACE
	ACALL	KLIKNIJ
	LCALL	WAIT_KEY
	LCALL	LCD_CLR
	MOV	R2, #15
	MOV	DPTR, #TEKST3
	LCALL	TEXT_L
	LCALL	WAIT_KEY
	MOV	AD4, A
	MOV	B, #0Ah
	MOV	A, AD4
	DIV	AB
	MOV	A,B
	JZ	ADD
	MOV	B, #0Bh
	MOV	A, AD4
	DIV	AB
	MOV	A,B
	JZ	SUBB
	MOV	B, #0Ch
	MOV	A, AD4	
	DIV	AB
	MOV	A, B
	JZ	MLP1
	MOV	B, #0Dh
	MOV	A, AD4
	DIV	AB
	MOV	A, B
	JZ	DZIEL1
	JNZ	RESZTA_ZERO1
ADD:	
	MOV	A, #'+'
	LCALL	WRITE_DATA
	ACALL	FZMIENNA
	MOV	A, #'+'
	LCALL	WRITE_DATA
	ACALL	SZMIENNA
	ACALL	EQUAL
	CLR	C		
	MOV	A, AD1
	ADD	A, AD2
	MOV	AD3, A		
	JNC	EE		
	MOV	A, #'1'
	LCALL	WRITE_DATA
	AJMP	EE1
EE:	ACALL	SPACE		
EE1:	MOV	A, AD3		
	LCALL	WRITE_HEX
	ACALL	H
	ACALL	SPACE
	ACALL	SPACE
	ACALL	SPACE
	LCALL	WAIT_KEY
	LCALL	LCD_CLR
	LJMP	START
MLP1:
	LJMP	MLP2
DZIEL1:
	LJMP	DZIEL2
RESZTA_ZERO1:
	LJMP	RESZTA_ZERO2
SUBB:
	MOV	A, #'-'
	LCALL	WRITE_DATA
	ACALL 	FZMIENNA
	MOV	A, #'-'
	LCALL	WRITE_DATA
	ACALL	SZMIENNA
	ACALL	EQUAL
	MOV 	A, AD1
	CLR	C
	SUBB	A, AD2
	JNC	ODE
	CPL	A
	ADD	A, #01H
	MOV	R0, A
	MOV	A, #'-'
	LCALL	WRITE_DATA
	MOV	A, R0
	LCALL	WRITE_HEX
	ACALL	H
	LCALL	WAIT_KEY
	ACALL	SPACE
	ACALL	SPACE
	ACALL	SPACE
	ACALL	SPACE
	LCALL	LCD_CLR
ODE:
	LCALL	WRITE_HEX
	ACALL	H
	LCALL	LCD_CLR
	LJMP	START
MLP2:	
	MOV	A, #'*'
	LCALL	WRITE_DATA	
	ACALL	FZMIENNA
	MOV	A, #'*'
	LCALL	WRITE_DATA
	ACALL	SZMIENNA
	ACALL	EQUAL
	MOV	A, AD1
	MOV	B, A
	MOV	A, AD2
	MUL	AB
	MOV	R1, A
	MOV	A, B
	LCALL	WRITE_HEX
	MOV	A, R1
	LCALL	WRITE_HEX
	ACALL	H
	ACALL	SPACE
	LCALL	WAIT_KEY
	LCALL	LCD_CLR
	LJMP	START

DZIEL2:
	MOV	A, #':'
	LCALL	WRITE_DATA
	ACALL	FZMIENNA
	MOV	A, #':'
	LCALL	WRITE_DATA
	ACALL	SZMIENNA
	ACALL	EQUAL
	MOV	A, AD2
	MOV	B, A
	MOV	A, AD1
	DIV	AB		
	MOV	R0, B
	LCALL	WRITE_HEX
	ACALL	H
	MOV	A, R0
	JZ	RESZTA_ZERO2
	ACALL	SPACE
	MOV	A, #'r'
	LCALL	WRITE_DATA
	MOV	A, R0
	LCALL	WRITE_HEX
	ACALL	H
	

RESZTA_ZERO2:
	LCALL	WAIT_KEY
	LCALL	LCD_CLR
	LJMP	START

;==============FUNKCJE==================

	
	
EQUAL:
	MOV	A,#'='
	LCALL	WRITE_DATA
	RET

FZMIENNA:
	MOV	A, AD1
	LCALL	WRITE_HEX
	ACALL	H
	RET
SZMIENNA:
	MOV	A, AD2
	LCALL	WRITE_HEX
	ACALL	H
	RET

H:
	MOV	A, #'h'
	LCALL	WRITE_DATA
	RET
KLIKNIJ:
	MOV	R2, #7
	MOV	DPTR, #TEKST1
	ACALL	TEXT_L
	RET
KLIKNIJ4:
	MOV	R2,#15
	MOV	DPTR, #TEKST2
	ACALL	TEXT_L
	RET
	
	
SPACE:
	MOV	A, #32
	LCALL	WRITE_DATA
	RET

READ_HEX:
	LCALL	WAIT_KEY
	SWAP	A
	MOV	B, A
	LCALL	WAIT_KEY
	ORL	A, B
	RET
TEXT_L:
	MOVX	A,@DPTR
	INC	DPTR
	LCALL	WRITE_DATA
	DJNZ	R2,TEXT_L
	RET

	ORG	TEKST1
	DB	"kliknij"
	ORG	TEKST2
	DB	"kliknij 4 znaki"
	ORG	TEKST3
	DB	"znak operacji: "
END
	
	
